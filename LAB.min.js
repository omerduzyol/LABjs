/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
v2.0.3 (c) Kyle Simpson
MIT License

.fail() handlers added by Omer Duzyol

*/
(function(e){function m(e){return Object.prototype.toString.call(e)=="[object Function]"}function g(e){return Object.prototype.toString.call(e)=="[object Array]"}function y(e,t){var n=/^\w+\:\/\//;if(/^\/\/\/?/.test(e)){e=location.protocol+e}else if(!n.test(e)&&e.charAt(0)!="/"){e=(t||"")+e}return n.test(e)?e:(e.charAt(0)=="/"?a:u)+e}function b(e,t){for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}return t}function w(e){var t=false;for(var n=0;n<e.scripts.length;n++){if(e.scripts[n].ready&&e.scripts[n].exec_trigger){t=true;e.scripts[n].exec_trigger();e.scripts[n].exec_trigger=null}}return t}function E(e,t,n,r,i){e.onload=e.onreadystatechange=function(){if(e.readyState&&e.readyState!="complete"&&e.readyState!="loaded"||t[n])return;e.onload=e.onreadystatechange=null;r()};e.onerror=i}function S(e){e.ready=e.finished=true;for(var t=0;t<e.finished_listeners.length;t++){e.finished_listeners[t]()}e.ready_listeners=[];e.finished_listeners=[];e.failed_listeners=[]}function x(e){e.failed=e.finished=true;for(var t=0;t<e.failed_listeners.length;t++){e.failed_listeners[t]()}e.ready_listeners=[];e.finished_listeners=[];e.failed_listeners=[]}function T(e,t,r,i,s,o){setTimeout(function(){var u,l=t.real_src,c;if("item"in f){if(!f[0]){setTimeout(arguments.callee,25);return}f=f[0]}u=document.createElement("script");if(t.type)u.type=t.type;if(t.charset)u.charset=t.charset;if(s){if(p){r.elem=u;if(h){u.preload=true;u.onpreload=i}else{u.onreadystatechange=function(){if(u.readyState=="loaded")i()}}u.src=l}else if(s&&l.indexOf(a)==0&&e[n]){c=new XMLHttpRequest;c.onreadystatechange=function(){if(c.readyState==4){c.onreadystatechange=function(){};r.text=c.responseText+"\n//@ sourceURL="+l;i()}};c.open("GET",l);c.send()}else{u.type="text/cache-script";E(u,r,"ready",function(){f.removeChild(u);i()},o);u.src=l;f.insertBefore(u,f.firstChild)}}else if(d){u.async=false;E(u,r,"finished",i,o);u.src=l;f.insertBefore(u,f.firstChild)}else{E(u,r,"finished",i,o);u.src=l;f.insertBefore(u,f.firstChild)}},0)}function N(){function d(e,t,n){function s(){if(r!=null){r=null;S(n)}}var r;if(c[t.src].finished)return;if(!e[i])c[t.src].finished=true;r=n.elem||document.createElement("script");if(t.type)r.type=t.type;if(t.charset)r.charset=t.charset;E(r,n,"finished",s);if(n.elem){n.elem=null}else if(n.text){r.onload=r.onreadystatechange=null;r.text=n.text}else{r.src=t.real_src}f.insertBefore(r,f.firstChild);if(n.text){s()}}function C(e,t,n,r){var u,a,f=function(){t.ready_cb(t,function(){d(e,t,u)})},l=function(){t.finished_cb(t,n)},h=function(){t.failed_cb(t,n)};t.src=y(t.src,e[o]);t.real_src=t.src+(e[s]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(Math.random()*1e9)+"=":"");if(!c[t.src])c[t.src]={items:[],finished:false};a=c[t.src].items;if(e[i]||a.length==0){u=a[a.length]={ready:false,finished:false,ready_listeners:[f],finished_listeners:[l],failed_listeners:[h]};T(e,t,u,r?function(){u.ready=true;for(var e=0;e<u.ready_listeners.length;e++){u.ready_listeners[e]()}u.ready_listeners=[]}:function(){S(u)},r,function(e){x(u)})}else{u=a[0];if(u.finished){if(u.failed)h();else l()}else{u.finished_listeners.push(l)}}}function k(){function f(e,t){e.ready=true;e.exec_trigger=t;p()}function l(e,t){e.ready=e.finished=true;e.exec_trigger=null;for(var n=0;n<t.scripts.length;n++){if(!t.scripts[n].finished)return}t.finished=true;p()}function c(e,t){e.failed=e.finished=true;e.exec_trigger=null;for(var n=0;n<t.scripts.length;n++){if(!t.scripts[n].finished)return}t.failed=true;t.finished=true;p()}function h(){var e=null;var t=i;while(e==null){if(!m(n[t]))e=n[t];t--;if(t<0)break}return e}function p(){while(i<n.length){if(m(n[i])){var e=h();var t=n[i++];if(e.failed!==undefined){if(e.failed==true&&t.succeed)continue}else if(e.failed===undefined&&!t.succeed)continue;try{t()}catch(r){}continue}else{if(!n[i].finished){if(w(n[i]))continue;break}}i++}if(i==n.length){s=false;o=false}}function d(){if(!o||!o.scripts){n.push(o={scripts:[],finished:true})}}var e,t=b(u,{}),n=[],i=0,s=false,o;e={script:function(){for(var n=0;n<arguments.length;n++){(function(n,i){var u;if(!g(n)){i=[n]}for(var h=0;h<i.length;h++){d();n=i[h];if(m(n))n=n();if(!n)continue;if(g(n)){u=[].slice.call(n);u.unshift(h,1);[].splice.apply(i,u);h--;continue}if(typeof n=="string")n={src:n};n=b(n,{ready:false,ready_cb:f,finished:false,finished_cb:l,failed:false,failed_cb:c});o.finished=false;o.scripts.push(n);C(t,n,o,a&&s);s=true;if(t[r])e.wait()}})(arguments[n],arguments[n])}return e},wait:function(){if(arguments.length>0){for(var t=0;t<arguments.length;t++){var r=arguments[t];r.succeed=true;n.push(r)}o=n[n.length-1]}else o=false;p();return e},fail:function(){if(arguments.length>0){for(var t=0;t<arguments.length;t++){var r=arguments[t];r.succeed=false;n.push(r)}o=n[n.length-1]}else o=false;p();return e}};return{script:e.script,wait:e.wait,fail:e.fail,setOptions:function(n){b(n,t);return e}}}var u={},a=p||v,l=[],c={},h;u[n]=true;u[r]=false;u[i]=false;u[s]=false;u[o]="";h={setGlobalDefaults:function(e){b(e,u);return h},setOptions:function(){return k().setOptions.apply(null,arguments)},script:function(){return k().script.apply(null,arguments)},wait:function(){return k().wait.apply(null,arguments)},fail:function(){return k().fail.apply(null,arguments)},queueScript:function(){l[l.length]={type:"script",args:[].slice.call(arguments)};return h},queueWait:function(){l[l.length]={type:"wait",args:[].slice.call(arguments)};return h},runQueue:function(){var e=h,t=l.length,n=t,r;for(;--n>=0;){r=l.shift();e=e[r.type].apply(null,r.args)}return e},noConflict:function(){e.$LAB=t;return h},sandbox:function(){return N()}};return h}var t=e.$LAB,n="UseLocalXHR",r="AlwaysPreserveOrder",i="AllowDuplicates",s="CacheBust",o="BasePath",u=/^[^?#]*\//.exec(location.href)[0],a=/^\w+\:\/\/\/?[^\/]+/.exec(u)[0],f=document.head||document.getElementsByTagName("head"),l=e.opera&&Object.prototype.toString.call(e.opera)=="[object Opera]"||"MozAppearance"in document.documentElement.style,c=document.createElement("script"),h=typeof c.preload=="boolean",p=h||c.readyState&&c.readyState=="uninitialized",d=!p&&c.async===true,v=!p&&!d&&!l;e.$LAB=N();(function(e,t,n){if(document.readyState==null&&document[e]){document.readyState="loading";document[e](t,n=function(){document.removeEventListener(t,n,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);